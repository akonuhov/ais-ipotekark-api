webpackJsonp([11],{"5hDc":function(t,e){},sNDf:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),l=s("B+20"),r=s.n(l),n={name:"PageUsersList",components:{MainLayout:s("RThI").a,flatPickr:r.a},data:function(){return{filterPosition:null,filterRole:null,searchKeys:["id","account","email","name"],sortBy:"id",sortDesc:!1,perPage:10,fields:[{key:"fio",label:"ФИО",sortable:!0,tdClass:"align-middle"},{key:"password",label:"Должность",sortable:!0,tdClass:"align-middle"},{key:"dataBirth",label:"Дата рождения",sortable:!0,tdClass:"align-middle"},{key:"email",label:"Дата принятия на работу",sortable:!0,tdClass:"align-middle"},{key:"position",label:"Электронная почта",sortable:!0,tdClass:"align-middle"},{key:"phone",label:"Контактный телефон",sortable:!0,tdClass:"align-middle"},{key:"employmentDate",label:"Роль",sortable:!0,tdClass:"align-middle"},{key:"role",label:"Роль",sortable:!0,tdClass:"align-middle"},{key:"actions",tdClass:"text-nowrap align-middle text-center"}],usersData:[],originalUsersData:[],currentPage:1}},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)},disabledButtonFilter:function(){return!(!this.filterPosition&&!this.filterRole)},getUsersList:function(){return this.$store.state.user.list}},methods:{filter:function(t){var e=this,s=t.toLowerCase(),a=this.originalUsersData.filter(function(t){return-1!==i()(t).filter(function(t){return e.searchKeys.includes(t)}).map(function(e){return String(t[e])}).join("|").toLowerCase().indexOf(s)||!s});this.usersData=a}}},o=s("XyMi");var c=function(t){s("5hDc")},d=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-layout",{attrs:{title:"Список сотрудников"}},[s("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[s("div",{staticClass:"form-row align-items-center"},[s("div",{staticClass:"col-md mb-4"},[s("label",{staticClass:"form-label"},[t._v("Должность")]),t._v(" "),s("b-select",{attrs:{options:["Специалист","Менеджер","Администратор"]},model:{value:t.filterPosition,callback:function(e){t.filterPosition=e},expression:"filterPosition"}})],1),t._v(" "),s("div",{staticClass:"col-md mb-4"},[s("label",{staticClass:"form-label"},[t._v("Роль")]),t._v(" "),s("b-select",{attrs:{options:["Специалист","Менеджер","Администратор"]},model:{value:t.filterRole,callback:function(e){t.filterRole=e},expression:"filterRole"}})],1),t._v(" "),s("div",{staticClass:"col-md col-xl-2 mb-4"},[s("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),s("b-btn",{attrs:{variant:"secondary",block:!0,disabled:t.disabledButtonFilter}},[t._v("Показать")])],1),t._v(" "),s("div",{staticClass:"col-md col-xl-2 mb-4"},[s("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),s("b-btn",{attrs:{variant:"primary",block:!0,to:"/users/create"}},[t._v("Добавить")])],1)])]),t._v(" "),s("b-card",{attrs:{"no-body":""}},[s("b-card-body",[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t._v("\n          На странице:  \n          "),s("b-select",{staticClass:"d-inline-block w-auto",attrs:{size:"sm",options:[10,20,30,40,50]},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),t._v(" "),s("div",{staticClass:"col d-flex justify-content-end"},[s("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"Поиск..."},on:{input:function(e){t.filter(e)}}})],1)])]),t._v(" "),s("hr",{staticClass:"border-light m-0"}),t._v(" "),s("div",{staticClass:"table-responsive"},[s("b-table",{staticClass:"card-table",attrs:{items:t.getUsersList,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"account",fn:function(e){return[s("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.item.account))])]}},{key:"verified",fn:function(t){return[s("span",{staticClass:"ion",class:{"ion-md-checkmark text-primary":t.item.verified,"ion-md-close text-light":!t.item.verified}})]}},{key:"role",fn:function(e){return[1===e.item.role?s("span",[t._v("User")]):t._e(),t._v(" "),2===e.item.role?s("span",[t._v("Author")]):t._e(),t._v(" "),3===e.item.role?s("span",[t._v("Staff")]):t._e(),t._v(" "),4===e.item.role?s("span",[t._v("Admin")]):t._e()]}},{key:"status",fn:function(e){return[1===e.item.status?s("b-badge",{attrs:{variant:"outline-success"}},[t._v("Active")]):t._e(),t._v(" "),2===e.item.status?s("b-badge",{attrs:{variant:"outline-danger"}},[t._v("Banned")]):t._e(),t._v(" "),3===e.item.status?s("b-badge",{attrs:{variant:"outline-default"}},[t._v("Deleted")]):t._e()]}},{key:"actions",fn:function(e){return[s("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Edit"}},[s("i",{staticClass:"ion ion-md-create"})]),t._v(" "),s("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[s("template",{slot:"button-content"},[s("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),s("b-dropdown-item",{attrs:{href:"javascript:void(0)"}},[t._v("View profile")]),t._v(" "),s("b-dropdown-item",{attrs:{href:"javascript:void(0)"}},[t._v("Ban user")]),t._v(" "),s("b-dropdown-item",{attrs:{href:"javascript:void(0)"}},[t._v("Remove")])],2)]}}])})],1),t._v(" "),s("b-card-body",{staticClass:"pt-0 pb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?s("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),s("div",{staticClass:"col-sm pt-3"},[t.totalItems?s("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.perPage,size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])])],1)],1)},[],!1,c,null,null);e.default=d.exports}});